{"version":3,"sources":["extensionsIntegrated/Phoenix/default-projects.js"],"names":["define","require","exports","module","ProjectManager","Strings","ZipUtils","async","_setupStartupProject","console","log","getWelcomeProjectPath","unzipURLToLocation","indexHtmlPath","fs","readFile","err","text","includes","error","newText","replace","DEFAULT_PROJECT_HTML_CLICK_HERE","writeFile","writErr","_setupExploreProject","exploreProjectPath","getExploreProjectPath","exists","Phoenix","VFS","existsAsync","init","firstBoot"],"mappings":"AAsBAA,OAAO,SAAUC,QAASC,QAASC,QAC/B,MAAMC,eAA0BH,QAAQ,0BACpCI,QAAcJ,QAAQ,WACtBK,SAAWL,QAAQ,kBAEvBM,eAAeC,uBACXC,QAAQC,IAAI,6BAA8BN,eAAeO,+BACnDL,SAASM,mBAAmB,gCAAiCR,eAAeO,yBAClF,MAAME,iBAAmBT,eAAeO,oCACxCG,GAAGC,SAASF,cAAe,OAAQ,SAAUG,IAAKC,MAC9C,GAAGD,MAAQC,KACP,OAEJ,IAAIA,KAAKC,SAAS,cAEd,YADAT,QAAQU,MAAM,wDAGlB,MAAMC,QAAUH,KAAKI,QAAQ,aAAchB,QAAQiB,iCACnDR,GAAGS,UAAUV,cAAeO,QAAS,OAASI,UACvCA,SACCf,QAAQU,MAAM,+CAAgDK,aAK9EjB,eAAekB,uBACX,IAAIC,mBAAqBtB,eAAeuB,wBACpCC,aAAeC,QAAQC,IAAIC,YAAYL,sBAEvCjB,QAAQC,IAAI,6BAA8BgB,0BACpCpB,SAASM,mBAAmB,qCAAsCc,qBAIhFxB,QAAQ8B,KAAOzB,iBACRsB,QAAQI,WACPzB,uBAEJiB","sourcesContent":["/*\n * GNU AGPL-3.0 License\n *\n * Copyright (c) 2021 - present core.ai . All rights reserved.\n *\n * This program is free software: you can redistribute it and/or modify it\n * under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n * FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License\n * for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see https://opensource.org/licenses/AGPL-3.0.\n *\n */\n\n/*globals Phoenix, JSZip, Filer, fs*/\n\ndefine(function (require, exports, module) {\n    const ProjectManager          = require(\"project/ProjectManager\"),\n        Strings     = require(\"strings\"),\n        ZipUtils = require(\"utils/ZipUtils\");\n\n    async function _setupStartupProject() {\n        console.log(\"setting up startup project\", ProjectManager.getWelcomeProjectPath());\n        await ZipUtils.unzipURLToLocation('assets/default-project/en.zip', ProjectManager.getWelcomeProjectPath());\n        const indexHtmlPath = `${ProjectManager.getWelcomeProjectPath()}index.html`;\n        fs.readFile(indexHtmlPath, 'utf8', function (err, text) {\n            if(err || !text){\n                return;\n            }\n            if(!text.includes(\"CLICK_HERE\")){\n                console.error(\"Default project index.html doesnt have CLICK_HERE!!!\");\n                return;\n            }\n            const newText = text.replace(\"CLICK_HERE\", Strings.DEFAULT_PROJECT_HTML_CLICK_HERE);\n            fs.writeFile(indexHtmlPath, newText, 'utf8', (writErr)=>{\n                if(writErr){\n                    console.error(\"Error translating default project index.html\", writErr);\n                }\n            });\n        });\n    }\n    async function _setupExploreProject() {\n        let exploreProjectPath = ProjectManager.getExploreProjectPath();\n        let exists = await Phoenix.VFS.existsAsync(exploreProjectPath);\n        if(!exists){\n            console.log(\"setting up explore project\", exploreProjectPath);\n            await ZipUtils.unzipURLToLocation('assets/sample-projects/explore.zip', exploreProjectPath);\n        }\n    }\n\n    exports.init = async function () {\n        if(Phoenix.firstBoot){\n            _setupStartupProject();\n        }\n        _setupExploreProject();\n    };\n});\n"],"file":"default-projects.js"}